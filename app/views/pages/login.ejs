<%- include('../layouts/header', { pageStyles: '/css/login.css' }) %>

    <div class="container-fluid vh-100 d-flex align-items-center justify-content-center">
        <div class="row w-100">
            <div class="col-md-6 d-none d-md-block d-flex align-items-center justify-content-center">
                <div class="text-center">
                    <i class="fab fa-twitter text-twitter" style="font-size: 20rem;"></i>
                </div>
            </div>
            <div class="col-md-6 d-flex align-items-center justify-content-center">
                <div class="twitter-card p-5" style="max-width: 400px; width: 100%;">
                    <div class="text-center mb-4">
                        <div class="logo mb-3">
                            <i class="fab fa-twitter"></i> Twikk
                        </div>
                        <h2 class="mb-4">Log in to Twikk</h2>
                    </div>

                    <% if (error) { %>
                        <div class="alert alert-danger" role="alert">
                            <i class="fas fa-exclamation-triangle me-2"></i>
                            <%= error %>
                        </div>
                        <% } %>

                            <form action="/login" method="POST">
                                <div class="mb-3">
                                    <label for="email" class="form-label">Email</label>
                                    <input type="email" class="form-control" id="email" name="email" required>
                                </div>

                                <div class="mb-4">
                                    <label for="password" class="form-label">Password</label>
                                    <input type="password" class="form-control" id="password" name="password" autocomplete="current-password" required>
                                </div>

                                <div class="d-grid gap-2">
                                    <button type="submit" class="btn btn-twitter btn-lg">
                                        <i class="fas fa-sign-in-alt me-2"></i>Log in
                                    </button>
                                </div>

                            </form>

                            <div class="divider my-4">
                                <span class="divider-text">or</span>
                            </div>

                            <div class="d-grid gap-2">
                                <button type="button" id="metamask-login-btn" class="btn btn-outline-primary btn-lg">
                                    <i class="fab fa-ethereum me-2"></i>Login with MetaMask
                                </button>
                            </div>

                            <div class="text-center mt-4">
                                <p class="text-muted">Don't have an account?</p>
                                <a href="/register" class="text-twitter text-decoration-none">
                                    <i class="fas fa-user-plus me-1"></i>Register now
                                </a>
                            </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ethers.js for Web3 functionality -->
    <script src="https://unpkg.com/ethers@6.8.1/dist/ethers.umd.min.js"></script>
    <!-- Debug script to check ethers loading -->
    <script>
        window.addEventListener('load', function() {
            console.log('Ethers loaded:', typeof ethers !== 'undefined');
            if (typeof ethers !== 'undefined') {
                console.log('Ethers version:', ethers.version);
            } else {
                console.error('Ethers.js failed to load');
            }
        });
    </script>
    <!-- MetaMask integration -->
    <script src="/js/metamask.js"></script>
    <%- include('../layouts/footer') %>