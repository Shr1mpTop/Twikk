<%- include('../layouts/header') %>

<div class="container-fluid">
  <div class="row">
    <!-- Sidebar -->
    <div class="col-md-3 bg-dark vh-100 position-fixed">
      <div class="p-4">
                    <div class="logo mb-4"><i class="fab fa-twitter"></i> Twikk</div>
                    <nav class="nav flex-column">
                        <a class="nav-link text-white mb-3" href="/dashboard">
                            <i class="fas fa-home me-3"></i>Home
                        </a>
                        <a class="nav-link text-white mb-3" href="/notifications">
                          <i class="fas fa-bell me-3"></i>Notifications
                        </a>
                        <a class="nav-link text-white mb-3" href="/messages">
                            <i class="fas fa-envelope me-3"></i>Messages
                        </a>

                        <a class="nav-link text-white mb-3" href="/gpt-chat">
                            <i class="fas fa-robot me-3"></i>Grok
                        </a>

                        <a class="nav-link text-white mb-3" href="#" onclick="showUserInfo()">
                            <i class="fas fa-user me-3"></i>Profile
                        </a>
                        <a class="nav-link text-white mb-3" href="/logout">
                            <i class="fas fa-sign-out-alt me-3"></i>Sign out
                        </a>
                    </nav>
                </div>
    </div>

    <!-- Main -->
    <div class="col-md-9 offset-md-3">
      <div class="p-4">
        <!-- Welcome -->
        <div class="twitter-card p-4 mb-4">
          <h3 class="text-twitter mb-3">
            <i class="fas fa-home me-2"></i>Welcome to Twikk, <%= user.name %>!
          </h3>
          <p class="text-muted">This is your dashboard. Post tweets, view the timeline, and manage your account.</p>
        </div>

        <!-- Profile -->
        <div class="twitter-card p-4 mb-4">
          <h4 class="text-twitter mb-3">
            <i class="fas fa-user-circle me-2"></i>Profile
          </h4>
          <div class="row">
            <div class="col-md-6">
              <p><strong>Name:</strong> <%= user.name %></p>
              <p><strong>Username:</strong> @<%= user.username %></p>
            </div>
            <div class="col-md-6">
              <p><strong>Email:</strong> <%= user.email %></p>
              <p><strong>User ID:</strong> <%= user.id %></p>
            </div>
          </div>
        </div>

        <!-- Compose -->
        <div class="twitter-card p-4 mb-4">
          <h4 class="text-twitter mb-3">
            <i class="fas fa-feather-alt me-2"></i>Compose new Tweet
          </h4>
          <form action="/tweet" method="POST">
            <div class="mb-3">
              <textarea class="form-control" name="content" rows="3" maxlength="280" placeholder="What's happening?"></textarea>
            </div>
            <div class="d-flex justify-content-between align-items-center">
              <span class="text-muted">Up to 280 characters</span>
              <button type="submit" class="btn btn-twitter">
                <i class="fas fa-paper-plane me-2"></i>Tweet
              </button>
            </div>
          </form>
        </div>

        <!-- Timeline -->
        <div class="twitter-card p-4">
          <h4 class="text-twitter mb-3">
            <i class="fas fa-stream me-2"></i>Timeline
          </h4>
          <% if (tweets && tweets.length > 0) { %>
            <% tweets.forEach(t => { %>
              <div class="mb-3 pb-2 border-bottom">
                <p><%= t.content %></p>
                <small class="text-muted">by <%= t.authorName %> Â· <%= new Date(t.createdAt).toLocaleString() %></small>
              </div>
            <% }) %>
          <% } else { %>
            <div class="text-center text-muted py-5">
              <i class="fas fa-comments fa-3x mb-3"></i>
              <p>No tweets yet</p>
              <p>Start by posting your first one!</p>
            </div>
          <% } %>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  function showUserInfo() {
    alert('User info:\nName: <%= user.name %>\nUsername: @<%= user.username %>\nEmail: <%= user.email %>');
  }
</script>

<%- include('../layouts/footer') %>
